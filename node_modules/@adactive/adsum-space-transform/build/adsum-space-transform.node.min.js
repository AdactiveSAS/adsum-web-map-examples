module.exports=function(t){var e={};function __webpack_require__(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,__webpack_require__),s.l=!0,s.exports}return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,r){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=6)}([function(t,e,r){"use strict";e.a=class WGS84{constructor(t,e,r){this.a=t,this.e=e,this.f=r,this.k0=.9996,this.ePow2=Math.pow(this.e,2),this.ePow4=Math.pow(this.e,4),this.ePow6=Math.pow(this.e,6),this.e1sq=this.ePow2/(1-this.ePow2)}static fromFlattening(t,e){return new this(t,Math.sqrt(2*e-Math.pow(e,2)),e)}}.fromFlattening(6378137,1/298.257223563)},function(t,e,r){"use strict";var s=r(2),a=r(0);e.a=class UtmGridZone{constructor(t){this.k=a.a.k0,this.E=5e5;const e=s.a.toDegree(t.long);this.zone=e<0?Math.floor((180+e)/6+1):Math.floor(e/6+31),this.long=s.a.toRadian(6*(this.zone-30)-3),this.N=t.lat<0?1e7:0,this.hemi=0===this.N?1:-1}}},function(t,e,r){"use strict";e.a=class AngleConverter{static toDegree(t){return 180*t/Math.PI}static toRadian(t){return t*Math.PI/180}}},function(t,e,r){"use strict";e.a=class Utm{constructor(t,e,r,s,a){this.E=t,this.N=e,this.alt=r,this.hemi=s,this.zone=a}}},function(t,e,r){"use strict";var s=r(2);e.a=class Gps{constructor(t,e,r){this.lat=t,this.long=e,this.alt=r}static fromDegree(t,e,r){return new this(s.a.toRadian(t),s.a.toRadian(e),r)}get latInDegree(){return s.a.toDegree(this.lat)}get longInDegree(){return s.a.toDegree(this.long)}}},function(t,e,r){"use strict";class Matrix{constructor(t,e,r=null){this.n=t,this.m=e,null===r?(this.values=new Array(this.n*this.m),this.values.fill(0)):this.values=r}get(t,e){return this.values[this.getIndex(t,e)]}set(t,e,r){return this.values[this.getIndex(t,e)]=r,this}getIndex(t,e){if("number"!=typeof t||t>=this.n)throw new Error("Invalid row index");if("number"!=typeof e||e>=this.m)throw new Error("Invalid column index");return t*this.m+e}transpose(){const t=new Matrix(this.m,this.n);for(let e=0;e<this.n;e++)for(let r=0;r<this.m;r++)t.set(r,e,this.get(e,r));return t}multiply(t){if("number"!=typeof t)throw new Error("Expected a number");return this.values=this.values.map(e=>e*t),this}extractColumn(t){const e=new Matrix(this.n,1);for(let r=0;r<this.n;r++)e.set(r,0,this.get(r,t));return e}static sum(t,e){if(t.m!==e.m||t.n!==e.n)throw new Error("Invalid given matrices");return new Matrix(t.n,t.m,t.values.map((t,r)=>t+e.values[r]))}static identity(t){const e=new Matrix(t,t);for(let r=0;r<t;r++)e.set(r,r,1);return e}static additiveInverse(t){return new Matrix(t.n,t.m,t.values.map(t=>-1*t))}static product(t,e){if(!(t instanceof Matrix&&e instanceof Matrix))throw new Error("Expected two Matrices");if(t.m!==e.n)throw new Error("Invalid given matrices");const r=t.m,s=new Matrix(t.n,e.m);for(let a=0;a<s.n;a++)for(let n=0;n<s.m;n++){let i=0;for(let s=0;s<r;s++)i+=t.get(a,s)*e.get(s,n);s.set(a,n,i)}return s}static inverseMatrix3(t){if(3!==t.n||3!==t.m)throw new Error("Works only with Matrix 3");const e=t.extractColumn(0),r=t.extractColumn(1),s=t.extractColumn(2),a=this.determinantMatrix3(t);if(0===a)throw new Error("Not inversible matrix");const n=this.crossProductVector3(r,s).transpose().multiply(1/a),i=this.crossProductVector3(s,e).transpose().multiply(1/a),o=this.crossProductVector3(e,r).transpose().multiply(1/a),h=new Matrix(3,3);return h.set(0,0,n.get(0,0)),h.set(0,1,n.get(0,1)),h.set(0,2,n.get(0,2)),h.set(1,0,i.get(0,0)),h.set(1,1,i.get(0,1)),h.set(1,2,i.get(0,2)),h.set(2,0,o.get(0,0)),h.set(2,1,o.get(0,1)),h.set(2,2,o.get(0,2)),h}static determinantMatrix3(t){if(3!==t.n||3!==t.m)throw new Error("Works only with Matrix 3");const e=t.extractColumn(0),r=t.extractColumn(1),s=t.extractColumn(2);return Matrix.dotProductVector(e,Matrix.crossProductVector3(r,s))}static crossProductVector3(t,e){if(3!==t.n||1!==t.m||3!==e.n||1!==e.m)throw new Error("Works only with Matrix 3x1");const r=new Matrix(3,1);return r.set(0,0,t.get(1,0)*e.get(2,0)-t.get(2,0)*e.get(1,0)),r.set(1,0,t.get(2,0)*e.get(0,0)-t.get(0,0)*e.get(2,0)),r.set(2,0,t.get(0,0)*e.get(1,0)-t.get(1,0)*e.get(0,0)),r}static dotProductVector(t,e){if(1!==t.m||1!==e.m||t.n!==e.n)throw new Error("Works only with Matrix nx1");let r=0;for(let s=0;s<t.n;s++)r+=t.get(s,0)*e.get(s,0);return r}}e.a=Matrix},function(t,e,r){t.exports=r(7)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r(8),a=r(11),n=r(1),i=r(4),o=r(3);r.d(e,"Gps",function(){return i.a}),r.d(e,"Utm",function(){return o.a}),r.d(e,"GpsUtmConverter",function(){return s.a}),r.d(e,"EuclideanSpaceTransform",function(){return a.a}),r.d(e,"UtmGridZone",function(){return n.a})},function(t,e,r){"use strict";var s=r(9),a=r(10),n=r(3),i=r(4);e.a=class GpsToUtmConverter{static toUtm(t,e){const r=new s.a(t,e);return new n.a(r.E,r.N,t.alt,r.utmGridZone.hemi,r.utmGridZone.zone)}static toGps(t){const e=new a.a(t);return i.a.fromDegree(e.latitude,e.longitude,t.alt)}}},function(t,e,r){"use strict";var s=r(1),a=r(0);const n=1-a.a.ePow2/4-3/64*a.a.ePow4-5/256*a.a.ePow6,i=3/8*a.a.ePow2+3/32*a.a.ePow4+45/1024*a.a.ePow6,o=15/256*a.a.ePow4+45/1024*a.a.ePow6,h=35/3072*a.a.ePow6;e.a=class GpsToUtmVariables{constructor(t,e=null){this.gps=t,this.utmGridZone=e||new s.a(this.gps),this.deltaLong=this.gps.long-this.utmGridZone.long,this.Nu=1/Math.sqrt(1-a.a.ePow2*Math.pow(Math.sin(this.gps.lat),2)),this.A=this.deltaLong*Math.cos(this.gps.lat),this.APow2=Math.pow(this.A,2),this.APow3=Math.pow(this.A,3),this.APow4=Math.pow(this.A,4),this.APow5=Math.pow(this.A,5),this.APow6=Math.pow(this.A,6);const r=Math.sin(2*this.gps.lat),c=Math.sin(4*this.gps.lat),u=Math.sin(6*this.gps.lat);this.S=n*this.gps.lat-i*r+o*c-h*u,this.T=Math.pow(Math.tan(this.gps.lat),2),this.TPow2=Math.pow(this.T,2),this.C=a.a.ePow2/(1-a.a.ePow2)*Math.pow(Math.cos(this.gps.lat),2),this.CPow2=Math.pow(this.C,2),this.E=this.A+(1-this.T+this.C)/6*this.APow3,this.E+=(5-18*this.T+this.TPow2)*this.APow5/120,this.E*=this.utmGridZone.k*a.a.a*this.Nu,this.E+=this.utmGridZone.E,this.N=this.APow2/2,this.N+=(5-this.T+9*this.C+4*this.CPow2)*this.APow4/24,this.N+=(61-58*this.T+this.TPow2)*this.APow6/720,this.N*=this.Nu*Math.tan(this.gps.lat),this.N+=this.S,this.N*=a.a.a*this.utmGridZone.k,this.N+=this.utmGridZone.N}}},function(t,e,r){"use strict";var s=r(0);e.a=class UtmToGpsVariables{constructor(t){let e=t.N;const r=1===t.hemi;r||(e=1e7-e);const a=e/s.a.k0/(s.a.a*(1-Math.pow(s.a.e,2)/4-3*Math.pow(s.a.e,4)/64-5*Math.pow(s.a.e,6)/256)),n=(1-Math.pow(1-s.a.ePow2,.5))/(1+Math.pow(1-s.a.ePow2,.5)),i=3*n/2-27*Math.pow(n,3)/32,o=21*Math.pow(n,2)/16-55*Math.pow(n,4)/32,h=151*Math.pow(n,3)/96,c=1097*Math.pow(n,4)/512,u=a+i*Math.sin(2*a)+o*Math.sin(4*a)+h*Math.sin(6*a)+c*Math.sin(8*a),l=s.a.a/Math.pow(1-Math.pow(s.a.e*Math.sin(u),2),.5),p=s.a.a*(1-s.a.ePow2)/Math.pow(1-Math.pow(s.a.e*Math.sin(u),2),1.5),w=l*Math.tan(u)/p,g=5e5-t.E,m=g/(l*s.a.k0),M=m*m/2,f=Math.pow(Math.tan(u),2),x=s.a.e1sq*Math.pow(Math.cos(u),2),_=(5+3*f+10*x-4*x*x-9*s.a.e1sq)*Math.pow(m,4)/24,d=(61+90*f+298*x+45*f*f-252*s.a.e1sq-3*x*x)*Math.pow(m,6)/720,v=(g/(l*s.a.k0)-(1+2*f+x)*Math.pow(m,3)/6+(5-2*x+28*f-3*Math.pow(x,2)+8*s.a.e1sq+24*Math.pow(f,2))*Math.pow(m,5)/120)/Math.cos(u)*180/Math.PI;this.latitude=180*(u-w*(M+_+d))/Math.PI,r||(this.latitude=-this.latitude);const y=t.zone>0?6*t.zone-183:3;this.longitude=y-v}}},function(t,e,r){"use strict";var s=r(12),a=r(5);class EuclideanSpaceTransform{constructor(t,e){this.transformMatrix=t,this.translateMatrix=e,this._reverseTransform=null}convert(t){const e=new a.a(3,1,[t.x,t.y,t.z]),r=a.a.sum(a.a.product(this.transformMatrix,e),this.translateMatrix);return{x:r.get(0,0),y:r.get(1,0),z:r.get(2,0)}}revert(t){return this.reverseTransform.convert(t)}get reverseTransform(){if(null===this._reverseTransform){const t=a.a.inverseMatrix3(this.transformMatrix),e=a.a.additiveInverse(a.a.product(t,this.translateMatrix));this._reverseTransform=new EuclideanSpaceTransform(t,e),this._reverseTransform._reverseTransform=this}return this._reverseTransform}getDistanceAverageError(t,e){const r=t.length;let s=0;for(let a=0;a<r;a++){const r=t[a],n=e[a];s+=this.constructor._getDistance(this.convert(r),n)}return s/r}getDistanceErrorRepartitionFromAverage(t,e){const r=t.length,s=this.getDistanceAverageError(t,e),a=new Array(10);a.fill(0);for(let n=0;n<r;n++){const r=t[n],i=e[n],o=this.constructor._getDistance(this.convert(r),i),h=Math.abs(s-o)/s*100;let c=Math.trunc(h/10);c>9&&(c=9),a[c]++}return a.map(t=>Math.floor(t/r*100))}getRelativeDistanceErrorFromAverage(t,e){const r=t.length,s=this.getDistanceAverageError(t,e),a=[];for(let n=0;n<r;n++){const r=t[n],i=e[n],o=this.constructor._getDistance(this.convert(r),i);a[n]=Math.abs(s-o)/s*100}return a}getAmplitudeError(t,e){const r=t.length,s={x:1/0,y:1/0,z:1/0},a={x:-1/0,y:-1/0,z:-1/0};for(let n=0;n<r;n++){const r=t[n],i=e[n],o=this.convert(r),h=Math.abs(o.x-i.x),c=Math.abs(o.y-i.y);h<s.x&&(s.x=h),h>a.x&&(a.x=h),c<s.y&&(s.y=c),c>a.y&&(a.y=c)}return{x:a.x-s.x,y:a.y-s.y}}static computeSample(t,e){return this._leastSquareComputeSample(t,e)}static _leastSquareComputeSample(t,e){const r=[];for(let s=0;s<t.length;s++){const a=[...t],n=[...e],i=a[s],o=n[s];a[s]=a[0],n[s]=n[0],a[0]=i,n[0]=o,r.push(this._leastSquareComputeSampleWithOrigin(a,n))}return this._selectResultLeastAverageDistanceError(r,t,e)}static _leastSquareComputeSampleWithOrigin(t,e){const r=[],n=[],i=t[0],o=e[0];for(let s=1;s<t.length;s++){const h=t[s],c=e[s],u=new a.a(2,1);u.set(0,0,h.x-i.x),u.set(1,0,h.y-i.y);const l=new a.a(2,1);l.set(0,0,c.x-o.x),l.set(1,0,c.y-o.y),r.push({parameters:u,result:l.get(0,0)}),n.push({parameters:u,result:l.get(1,0)})}const h=s.a.compute2ParametersRegression(r),c=s.a.compute2ParametersRegression(n),u=new a.a(3,3);u.set(0,0,h.get(1,0)),u.set(0,1,h.get(2,0)),u.set(0,2,0),u.set(1,0,c.get(1,0)),u.set(1,1,c.get(2,0)),u.set(1,2,0),u.set(2,0,0),u.set(2,1,0),u.set(2,2,1);const l=new a.a(3,1);return l.set(0,0,o.x+h.get(0,0)-h.get(1,0)*i.x-h.get(2,0)*i.y),l.set(1,0,o.y+c.get(0,0)-c.get(1,0)*i.x-c.get(2,0)*i.y),l.set(2,0,0),new EuclideanSpaceTransform(u,l)}static _linearComputeSample(t,e){const r=t.length,s=[];for(let a=0;a<r-2;a++){const n=t[a],i=e[a];for(let o=a+1;o<r-1;o++){const a=t[o],h=e[o];for(let c=o+1;c<r;c++){const r=t[c],o=e[c],u=this._linearComputeTripletSample(n,a,r,i,h,o);s.push(u)}}}return this._selectResultLeastAverageDistanceError(s,t,e)}static _linearComputeTripletSample(t,e,r,s,n,i){const o=e.x-t.x,h=e.y-t.y,c=r.x-t.x,u=r.y-t.y,l=n.x-s.x,p=n.y-s.y,w=((i.x-s.x)*o-l*c)/(u*o-c*h),g=((i.y-s.y)*o-p*c)/(u*o-c*h),m=(l-w*h)/o,M=(p-g*h)/o,f=new a.a(3,3);f.set(0,0,m),f.set(0,1,w),f.set(0,2,0),f.set(1,0,M),f.set(1,1,g),f.set(1,2,0),f.set(2,0,0),f.set(2,1,0),f.set(2,2,1);const x=new a.a(3,1);return x.set(0,0,s.x-m*t.x-w*t.y),x.set(1,0,s.y-M*t.x-g*t.y),x.set(2,0,0),new EuclideanSpaceTransform(f,x)}static _selectResultLeastAverageDistanceError(t,e,r){let s=null,a=1/0;if(!Array.isArray(t)||0===t.length)throw new Error("Expected a non empty array");return t.forEach(t=>{const n=t.getDistanceAverageError(e,r);n<a&&(s=t,a=n)}),s}static _getDistance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}}e.a=EuclideanSpaceTransform},function(t,e,r){"use strict";var s=r(5);e.a=class LinearSquareRegression{static compute2ParametersRegression(t){const e=t.length,r=new s.a(e,3),a=new s.a(e,1);for(let s=0;s<e;s++)r.set(s,0,1),r.set(s,1,t[s].parameters.get(0,0)),r.set(s,2,t[s].parameters.get(1,0)),a.set(s,0,t[s].result);const n=r.transpose();return s.a.product(s.a.product(s.a.inverseMatrix3(s.a.product(n,r)),n),a)}}}]);
//# sourceMappingURL=adsum-space-transform.node.min.js.map